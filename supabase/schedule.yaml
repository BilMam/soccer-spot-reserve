---
# MySport - Scheduled Tasks
# Automatisation des tâches de maintenance

schedules:
  - name: check-cinetpay-transfers
    description: "Vérification du statut des transferts CinetPay vers les propriétaires"
    cron: "*/15 * * * *"  # Toutes les 15 minutes
    function: check-cinetpay-transfers
    timezone: "UTC"

  - name: cleanup-expired-cagnottes
    description: "Nettoyage des cagnottes expirées et initiation des remboursements"
    cron: "* * * * *"  # Toutes les 1 minute
    function: cleanup-cagnotte-cron
    timezone: "UTC"

  # ❌ DÉSACTIVÉ : process-cagnotte-refunds est appelé par cleanup-cagnotte-cron
  # Pour éviter les appels en double et les traitements parallèles
  # - name: process-cagnotte-refunds
  #   description: "Traitement des remboursements de cagnottes (manuel via PSP)"
  #   cron: "*/2 * * * *"
  #   function: process-cagnotte-refunds
  #   timezone: "UTC"